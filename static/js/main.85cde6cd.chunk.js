(this["webpackJsonpcovid-viz"]=this["webpackJsonpcovid-viz"]||[]).push([[0],{185:function(t,e,a){t.exports=a(197)},191:function(t,e,a){},196:function(t,e,a){},197:function(t,e,a){"use strict";a.r(e);var r=a(0),n=a.n(r),i=a(10),o=a.n(i),s=a(22),u=a.n(s),c=a(36),l=a(14),p=a(15),h=a(18),d=a(17),y=a(242),v=a(254),g=a(255),f=a(252),m=a(251),C=a(11),b=a(5),k=(a(34),["none","population","voting","income","lowEducation","unemployment","underRepresentedMinorities","tweetsPerCapita","casesPerCapita","deathsPerCapita"]),S=["groups","countys"],w=function(){function t(){Object(l.a)(this,t)}return Object(p.a)(t,null,[{key:"signedLog",value:function(t){return Math.abs(t)<1?t:Math.sign(t)*Math.log(Math.abs(t))}},{key:"sum",value:function(t){var e,a=0,r=Object(C.a)(t);try{for(r.s();!(e=r.n()).done;){a+=e.value}}catch(n){r.e(n)}finally{r.f()}return a}},{key:"mean",value:function(t){var e,a=0,r=Object(C.a)(t);try{for(r.s();!(e=r.n()).done;){a+=e.value}}catch(n){r.e(n)}finally{r.f()}return a/t.length}},{key:"median",value:function(t){var e=t.slice();if(e.sort(),1===e.length)return e[0];if(e.length%2!==0)return e[parseInt(e.length/2)];var a=parseInt(e.length/2);return(e[a]+e[a+1])/2}},{key:"aggregateValues",value:function(t,e,a,r){var n,i=[],o=Object(C.a)(t.counties);try{for(o.s();!(n=o.n()).done;){var s=n.value,u=e(s);void 0!==r&&(u*=r(s)),i.push(u)}}catch(c){o.e(c)}finally{o.f()}return a(i)}},{key:"numberWithCommas",value:function(t){return t.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g,",")}},{key:"emptyObject",value:function(t){try{return t.constructor===Object&&0===Object.keys(t).length}catch(e){return!1}}},{key:"itemInArray",value:function(t,e){var a,r=Object(C.a)(e);try{for(r.s();!(a=r.n()).done;){if(t===a.value)return!0}}catch(n){r.e(n)}finally{r.f()}return!1}},{key:"validMapVars",value:function(t){return k}},{key:"arrayUnions",value:function(){for(var t=[],e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];if(1===a.length)return a[0];for(var n in a)t.concat(n[1].filter((function(e){return!t.includes(e)})));return t}},{key:"isObject",value:function(t){return t&&"object"===typeof t&&!Array.isArray(t)}},{key:"unCamelCase",value:function(t){try{return t.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/\b([A-Z]+)([A-Z])([a-z])/,"$1 $2$3").replace(/^./,(function(t){return t.toUpperCase()}))}catch(e){return""}}},{key:"unSnakeCase",value:function(t){try{return t.toLowerCase().replace(/([a-z])-([a-z])/g,"$1 $2").replace(/^./,(function(t){return t.toUpperCase()}))}catch(e){return""}}},{key:"formatPercent",value:function(e){return t.unCamelCase(e+"PerCapita")}},{key:"markify",value:function(t,e){var a=100/(t.length-1),r=[];for(var n in t){var i=t[n];void 0!==e&&(i=i===e?i:"");var o={value:n,label:i};r.push(o),a}return r}},{key:"markifiedLabelLookup",value:function(t,e){var a=e.filter((function(e){return e.value===t}));return a=a[0].label}},{key:"wrapError",value:function(t,e){try{t()}catch(a){console.log(e),console.log(a)}}},{key:"arrayEqual",value:function(t,e){if(t.length!==e.length)return!1;for(var a in t)if(t[a]!==e)return!1;return!0}},{key:"arrange",value:function(t,e,a){for(var r=(e-t)/(a-1),n=[],i=t;i<e;)n.push(i),i+=r;return n.push(e),n}}]),t}(),x=a(30),V=function(){function t(e){Object(l.a)(this,t),this.props=e}return Object(p.a)(t,null,[{key:"getAccessor",value:function(e,a){return t.getVarConfig(e,a).accessor}},{key:"getVarConfig",value:function(e,a){var r,n,i,o,s,u;switch(e){case"none":u="NA",r=function(t){return 0},n=function(t){return t},o=function(t){return 1},i=function(t,e){return 1},s=function(t){return""};break;case"voting":u="Net Part Votes/Person",r=function(e){return t.getNetDemVotes(e)/t.getCountyPopulation(e)},n=function(t){return t},o=t.getCountyPopulation,i=function(t,e){return w.sum(t)/w.sum(e)},s=function(t){return(t=(100*t).toFixed(0))>0?t+"% (D)":Math.abs(t)+"% (R)"};break;case"income":u="Median Income",r=t.getMedianIncome,n=Math.log,i=function(t,e){return w.sum(t)/w.sum(e)},o=t.getCountyPopulation,s=function(t){return"$"+w.numberWithCommas(t.toFixed(0))};break;case"population":u="Population (18+)",r=t.getCountyPopulation,n=Math.log,i=function(t,e){return w.sum(t)},o=function(t){return 1},s=function(t){return w.numberWithCommas(t.toFixed(0))};break;case"unemployment":u="Unemployment",r=t.getUnemploymentPct,n=function(t){return Math.pow(t,.25)},i=function(t,e){return w.sum(t)/w.sum(e)},o=t.getCountyPopulation,s=function(t){return t.toFixed(1)+"%"};break;case"lowEducation":u="% W/0 HS Degree",r=t.getLowEducationPct,n=function(t){return Math.pow(t,.25)},i=i=function(t,e){return w.sum(t)/w.sum(e)},o=t.getCountyPopulation,s=function(t){return t.toFixed(1)+"%"};break;case"underRepresentedMinorities":u="% Black/Hispanc",r=t.getURMPct,n=function(t){return Math.pow(t,.25)},i=function(t,e){return w.sum(t)/w.sum(e)},o=t.getCountyPopulation,s=function(t){return t.toFixed(1)+"%"};break;case"tweets":u="Unique Twitter Users",r=t.getTweetCount,n=function(t){return Math.pow(t,.25)},i=function(t,e){return w.sum(t)},o=function(t){return 1},s=function(t){return w.numberWithCommas(t)+" users"};break;case"tweetsPerCapita":u="Unique Twitter User",r=function(e){return t.getTweetCount(e)/t.getCountyPopulation(e)},n=function(t){return Math.pow(t,.25)},i=function(t,e){return w.sum(t)/w.sum(e)},o=t.getCountyPopulation,s=function(t){return(1e6*t).toFixed(0)+"/1M"};break;case"cases":u="Confirmed Cases",r=function(e){return t.covidData(e,"cases",a)},n=function(t){return Math.pow(t,.25)},i=function(t,e){return w.sum(t)},o=function(t){return 1},s=function(t){return w.numberWithCommas(t)+" cases"};break;case"casesPerCapita":u="Confirmed Cases",r=function(e){return 100*t.covidData(e,"cases",a)/t.getCountyPopulation(e)}.bind(a),n=function(t){return Math.pow(t,.25)},i=function(t,e){return w.sum(t)/w.sum(e)},o=t.getCountyPopulation,s=function(t){return(1e4*t).toFixed(1)+"/10K"};break;case"deaths":u="Confirmed Deaths",r=function(e){return t.covidData(e,"deaths",a)},n=function(t){return Math.pow(t,.25)},i=function(t,e){return w.sum(t)},o=function(t){return 1},s=function(t){return w.numberWithCommas(t)+" deaths"};break;case"deathsPerCapita":u="Confirmed Deaths",r=function(e){return 100*t.covidData(e,"deaths",a)/t.getCountyPopulation(e)}.bind(a),n=function(t){return Math.pow(t,.25)},i=function(t,e){return w.sum(t)/w.sum(e)},o=t.getCountyPopulation,s=function(t){return(1e4*t).toFixed(1)+"/10K"};break;default:u="NA",r=function(t){return.1},n=function(t){return t},i=function(t,e){return 1},o=function(t){return 1},s=function(t){return t.toFixed(4)}}return{accessor:r,scaler:n,aggregator:i,weightAccessor:o,labelFormatter:s,name:u}}},{key:"getGroupAccessor",value:function(e,a){var r=t.getVarConfig(e,a);return function(e){var a,n=[],i=[],o=Object(C.a)(t.getGroupCounties(e));try{for(o.s();!(a=o.n()).done;){var s=a.value,u=r.accessor(s),c=r.weightAccessor(s);n.push(u*c),i.push(c)}}catch(l){o.e(l)}finally{o.f()}return r.aggregator(n,i)}.bind(r)}},{key:"getSecondaryAccessor",value:function(e,a,r){var n,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];switch(e){case"cases":case"deaths":n=a==r?function(a){return t.covidData(a,e,r)}:function(n){return t.countyCovidChange(n,e,[a,r],i)[0]};break;case"tweets":n=t.getTweetCount;break;default:n=function(a){return t.covidData(a,e,r)}}return n}},{key:"getCountyPopulation",value:function(t){return parseInt(t.cvap)}},{key:"getCountyName",value:function(t){return t.county_name}},{key:"getGroupCounties",value:function(t){return t.counties}},{key:"getNetDemVotes",value:function(t){var e=parseFloat(t.net_dem_president_votes),a=parseFloat(t.net_dem_gov_votes),r=0;return isNaN(e)?isNaN(a)||(r=a):r=e,r}},{key:"getMedianIncome",value:function(t){return parseInt(t.median_hh_inc)}},{key:"getLowEducationPct",value:function(t){return parseInt(t.lesshs_pct)}},{key:"getURMPct",value:function(t){return parseInt(t.urm_pct)}},{key:"getCountyGeoid",value:function(t){return parseInt(t.GEOID)}},{key:"getUnemploymentPct",value:function(t){return parseFloat(t.clf_unemploy_pct)}},{key:"getTweetCount",value:function(t){return parseInt(t.tweet_users)}},{key:"getParentCountyGroup",value:function(t){return parseInt(t.parent)}},{key:"getCountyGroup",value:function(t){return parseInt(t.groupId)}},{key:"getCountyName",value:function(t){return t.county_name}},{key:"covidData",value:function(t,e,a){return t.covid[a][e]}},{key:"groupCovidData",value:function(e,a,r){var n,i=0,o=Object(C.a)(e.counties);try{for(o.s();!(n=o.n()).done;){var s=n.value;i+=t.covidData(s,a,r)}}catch(u){o.e(u)}finally{o.f()}return i}},{key:"countyGroupPopulation",value:function(e){var a,r=0,n=Object(C.a)(e.counties);try{for(n.s();!(a=n.n()).done;){var i=a.value;r+=t.getCountyPopulation(i)}}catch(o){n.e(o)}finally{n.f()}return r}},{key:"countyGroupMedianIncome",value:function(e){var a=e.counties.map(t.getMedianIncome);return w.mean(a).toFixed(0)}},{key:"countyGroupTweetCount",value:function(e){var a=e.counties.map(t.getTweetCount);return w.sum(a)}},{key:"countyCovidChange",value:function(e,a,r){var n,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=[],s=i?t.getCountyPopulation(e):1,u=t.covidData(e,a,r[0])/s,c=Object(C.a)(r.slice(1));try{for(c.s();!(n=c.n()).done;){var l=n.value,p=t.covidData(e,a,l)/s,h=p-u;o.push(h),u=p}}catch(d){c.e(d)}finally{c.f()}return o}},{key:"groupNetDemVotes",value:function(e){var a=e.counties.map(t.getNetDemVotes);return w.sum(a)}},{key:"getSingleCountyToolTip",value:function(e,a,r,n,i){var o,s=t.getCountyName(e)+" county</br>",u=[r,n,i],c=Object(C.a)(t.additionalToolTipVars.slice());try{for(c.s();!(o=c.n()).done;){var l=o.value;-1===u.indexOf(l)&&u.push(l)}}catch(g){c.e(g)}finally{c.f()}for(var p=0,h=u;p<h.length;p++){var d=h[p];if("none"!==d)try{var y=t.getVarConfig(d,a),v=(0,y.accessor)(e);s+=y.name+": "+y.labelFormatter(v)+"</br>"}catch(f){}}return s}},{key:"getGroupToolTip",value:function(e,a,r,n,i){var o,s="",u=[r,n,i],c=Object(C.a)(t.additionalToolTipVars.slice());try{for(c.s();!(o=c.n()).done;){var l=o.value;-1===u.indexOf(l)&&u.push(l)}}catch(g){c.e(g)}finally{c.f()}for(var p=0,h=u;p<h.length;p++){var d=h[p];if("none"!==d)try{var y=t.getVarConfig(d,a),v=t.getGroupAccessor(d,a)(e);s+=y.name+": "+y.labelFormatter(v)+"</br>"}catch(f){}}return s}},{key:"activeGroups",value:function(e,a){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r?e.slice().filter((function(e){return-1===a.indexOf(t.getCountyGroup(e))})):e.slice().filter((function(e){return a.indexOf(t.getCountyGroup(e))>-1}))}}]),t}();V.additionalToolTipVars=["population","cases","deaths"];var G=a(65),D=function(){function t(e,a,r,n,i){Object(l.a)(this,t),void 0===e||w.emptyObject(e)?this.active=!1:(this.active=!0,this.activePrimary="none"!==a&void 0!==a,this.activeSecondary="none"!==r&void 0!==a,this.activeTertiary="none"!==n&void 0!==n,this.stateId=a+r+n+i,this.primaryVar=a,this.secondaryVar=r,this.tertiaryVar=n,this.date=i,this.primarySingleAccessor=V.getAccessor(a,i),this.secondarySingleAccessor=V.getAccessor(r,i),this.tertiarySingleAccessor=V.getAccessor(n,i),this.primaryGroupAccessor=V.getGroupAccessor(a,i),this.secondaryGroupAccessor=V.getGroupAccessor(r,i),this.tertiaryGroupAccessor=V.getGroupAccessor(n,i),this.scaleRanges=w.arrange(0,1,20),this.colorRanges=w.arrange(.1,1,20),this.primaryScale=this.getQuantileScale(e,this.primaryGroupAccessor),this.secondaryScale=this.getQuantileScale(e,this.secondaryGroupAccessor),this.tertiaryScale=this.getQuantileScale(e,this.tertiaryGroupAccessor),this.populationScale=this.getPowerScale(e,V.countyGroupPopulation),"voting"===a?(this.primaryInterpolator=b.l,"voting"===r?(this.secondaryInterpolator=b.l,this.glyphScale=function(t){return 2*Math.abs(t-.5)}):(this.secondaryInterpolator=this.makeInterpolator(40),this.glyphScale=function(t){return t}),"voting"===n?(this.tertiaryInterpolator=b.l,this.patternScale=function(t){return 2*Math.pow(Math.abs(t-.5),.5)}):(this.tertiaryInterpolator=b.j,this.patternScale=function(t){return t})):(this.primaryInterpolator=this.makeInterpolator(40),"voting"===r?(this.secondaryInterpolator=b.l,this.glyphScale=function(t){return 2*Math.abs(t-.5)}):(this.secondaryInterpolator=b.k,this.glyphScale=function(t){return t}),"voting"===n?(this.tertiaryInterpolator=b.l,this.primaryInterpolator=this.makeInterpolator(40),this.patternScale=function(t){return 2*Math.pow(Math.abs(t-.5),.5)}):(this.tertiaryInterpolator=b.j,this.patternScale=function(t){return t})))}return Object(p.a)(t,[{key:"makeInterpolator",value:function(t,e){return void 0===e?function(e){var a=.1+.9*e,r=.9-.55*e;return b.i(t,a,r).toString()}.bind(t):function(a){var r=2*Math.abs(a-.5),n=.1+.9*r,i=.9-.55*r,o=a>=.5?t:e;return b.i(o,n,i).toString()}}},{key:"getPowerScale",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=function(t){return Math.pow(t,a)},n=b.n(t.map(e).map(r)),i=b.p().domain([0,n]).range([0,1]);console.log("max",n,i(n),i(n/2));var o=function(t){return i(r(t))};return o}},{key:"getQuantileScale",value:function(t,e,a){var r=t.map(e),n=void 0!==a?w.arrange(0,1,a):this.scaleRanges,i=void 0!==a?w.arrange(0,1,a):this.colorRanges,o=Object(x.quantile)(r.filter((function(t){return 0!==t})),n),s=b.p().domain(o).range(i);return s}},{key:"interpolateFill",value:function(t,e){var a=this.primaryScale(t);return this.primaryInterpolator(a)}},{key:"getGroupColor",value:function(t){if(!this.activePrimary||!this.active)return"#FAEBD7";var e=this.primaryGroupAccessor(t);if(!this.activeSecondary)return this.interpolateFill(e,.01);var a=this.secondaryGroupAccessor(t);return this.interpolateFill(e,a)}},{key:"getCountyColor",value:function(t){if(!this.activePrimary||!this.active)return"#FFEBCD";var e=this.primarySingleAccessor(t);if(!this.activeSecondary)return this.interpolateFill(e,.01);var a=this.secondarySingleAccessor(t);return this.interpolateFill(e,a)}},{key:"getGroupTexture",value:function(t){var e=this.getGroupColor(t),a=this.tertiaryGroupAccessor(t);return this.toTexture(a,e,4)}},{key:"getCountyTexture",value:function(t){var e=this.getCountyColor(t),a=this.tertiarySingleAccessor(t);return this.toTexture(a,e,3)}},{key:"toTexture",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=this.tertiaryScale(t),n=this.tertiaryInterpolator(r),i=G.a.lines().orientation("vertical").size(a).stroke(n).strokeWidth(this.patternScale(r)).background(e);return i}},{key:"getGlyphColor",value:function(t){if(!this.activeSecondary||!this.active)return"";var e=this.secondarySingleAccessor(t);return e=this.secondaryScale(e),this.secondaryInterpolator(e)}},{key:"getGlyphRadius",value:function(t){if(!this.activeSecondary||!this.active)return 0;var e=this.secondarySingleAccessor(t);if(0===e)return 0;e=this.secondaryScale(e),e=this.glyphScale(e);var a=V.getCountyPopulation(t);return a=this.populationScale(a),this.scaleRadius(e,a)}},{key:"scaleRadius",value:function(t,e){return 7*Math.pow(e*t,.5)+1}},{key:"drawGlyph",value:function(t){}}]),t}(),T=function(t){Object(h.a)(a,t);var e=Object(d.a)(a);function a(t){var r;return Object(l.a)(this,a),(r=e.call(this,t)).state={zoomedToId:null,currentTransform:"",activeCountyGroups:[]},r.dataAccessor=function(t){return t},r.colorProps={},r.bordersDrawn=!1,r.glyphsDrawn=!1,r}return Object(p.a)(a,[{key:"zoomed",value:function(){var t=b.d.transform;this.setState({currentTransform:t})}},{key:"create",value:function(t){b.r(t).selectAll("svg").remove(),this.height=t.clientHeight,this.width=t.clientWidth,this.svg=b.r(t).append("svg").attr("class","map-svg zoomable").attr("width",this.width).attr("height",this.height).style("background-color",this.props.backgroundColor).on("contextmenu",this.handleRightClick.bind(this)),this.scale=Math.min(1.35*this.width,3*this.height),this.g=this.svg.append("g").attr("class","map"),this.zoom=b.t().on("zoom",this.zoomed.bind(this)),this.svg.call(this.zoom),this.projection=b.f().translate([t.clientWidth/2,t.clientHeight/2]).scale(this.scale),this.path=b.h().projection(this.projection),w.wrapError(this.drawBorders.bind(this),"error in Map.drawBorders"),w.wrapError(this.colorBoundaries.bind(this),"error in Map.colorBoundaries"),w.wrapError(this.drawGlyphs.bind(this),"error in Map.drawSpikes")}},{key:"destroy",value:function(){b.s(".map-svg").remove()}},{key:"drawBorders",value:function(){this.g.selectAll("path").filter(".county").remove(),w.emptyObject(this.props.data)||(this.props.aggregateCountys?this.drawCountyGroupBorders():this.drawSingleCountys())}},{key:"drawCountyGroupBorders",value:function(){var t=this;this.bordersDrawn=!1,this.g.selectAll("path").filter(".county").data(this.props.data).enter().append("path").attr("class","county").attr("id",(function(t,e){return"countyGroup"+V.getCountyGroup(t)})).attr("d",(function(e){return t.path(e.features)})).exit().remove(),this.bordersDrawn=!0}},{key:"drawSingleCountys",value:function(){var t=this;this.bordersDrawn=!1;var e,a=Object(C.a)(this.props.data);try{for(a.s();!(e=a.n()).done;){var r=e.value,n=V.getCountyGroup(r),i=this.g.selectAll("path").filter(".county").filter("[parentId='"+n+"']");i.data(r.counties).enter().append("path").attr("class","county").attr("parentId",n).attr("id",(function(t,e){return"singleCounty"+V.getCountyGeoid(t)})).attr("d",(function(e){return t.path(e.features)})),i.exit().remove()}}catch(o){a.e(o)}finally{a.f()}this.bordersDrawn=!0}},{key:"colorBoundaries",value:function(){var t=this;if(!w.emptyObject(this.props.data)){this.colorScale=this.props.colorScale;var e=this.colorScale.getCountyColor.bind(this.colorScale),a=this.handleSingleCountyClick.bind(this),r=function(e,a){return t.handleSingleCountyMouseOver(e,a)},n=function(e,a){return t.handleSingleCountyMouseOut(e,a)},i=function(t){return V.getParentCountyGroup(t)},o=1;this.props.aggregateCountys&&(e=this.colorScale.getGroupColor.bind(this.colorScale),i=V.getCountyGroup,a=this.handleCountyGroupClick.bind(this),r=function(e,a){return t.handleGroupMouseOver(e,a)},n=function(e,a){return t.handleGroupMouseOut(e,a)},o=1.5);var s=function(t){var e=i(t);return-1!==this.props.activeCountyGroups.indexOf(e)?o:0}.bind(this),u=this.g.selectAll("path").filter(".county"),c=[];if("none"!==this.props.tertiaryVar){var l=this.props.aggregateCountys?this.colorScale.getGroupTexture.bind(this.colorScale):this.colorScale.getCountyTexture.bind(this.colorScale);u.data().forEach((function(t){var e=l(t);c.push(e)})),e=function(t,e){var a=c[e];return this.svg.call(a),a.url()}.bind(this)}u.attr("stroke",this.props.strokeColor).attr("fill",e).attr("stroke-width",s).on("mouseover",r.bind(this)).on("mouseout",n.bind(this)).on("click",a.bind(this)),u.exit().remove()}}},{key:"drawGlyphs",value:function(){var t=this;if(!w.emptyObject(this.props.data)&&this.props.glyphsActive&&(this.g.selectAll(".glyph").remove(),"none"!==this.props.secondaryVar)){console.log("drawGlyphs");var e,a=function(t){return this.projection(b.g(t.features))}.bind(this),r=this.props.colorScale.getGlyphColor.bind(this.colorScale),n=this.props.colorScale.getGlyphRadius.bind(this.colorScale),i=Object(C.a)(this.props.data);try{for(i.s();!(e=i.n()).done;){var o=e.value,s=V.getCountyGroup(o);this.g.selectAll(".glyph").filter("[parentId='"+s+"']").data(o.counties).enter().append("circle").attr("class","glyph").attr("id",(function(t){return"glyph"+V.getCountyGeoid(t)})).attr("parentId",s).attr("cx",(function(t){return a(t)[0]})).attr("cy",(function(t){return a(t)[1]})).attr("r",n).attr("stroke-width",.5).attr("stroke","black").attr("fill",r).on("click",this.handleGlyphClick.bind(this)).on("mouseover",(function(e,a){return t.handleGlyphMouseOver(e,a)})).on("mouseout",(function(e,a){return t.handleGlyphMouseOut(e,a)})).raise().exit().remove()}}catch(u){i.e(u)}finally{i.f()}this.glyphsDrawn=!0}}},{key:"handleGlyphClick",value:function(t){var e=V.getParentCountyGroup(t);this.props.toggleActiveCountyGroups(e)}},{key:"singleTTip",value:function(t){return V.getSingleCountyToolTip(t,this.props.mapDate,this.props.mapVar,this.props.secondaryVar,this.props.tertiaryVar)}},{key:"groupTTip",value:function(t){return V.getGroupToolTip(t,this.props.mapDate,this.props.mapVar,this.props.secondaryVar,this.props.tertiaryVar)}},{key:"handleGlyphMouseOver",value:function(t,e){var a=this.g.select("#glyph"+V.getCountyGeoid(t)),r=a.node().getAttribute("r");a.style("r",3*r).style("stroke","red").style("z-index",100);try{var n=a.node().getBoundingClientRect();console.log("gmouseover",n);var i=b.r(".map-svg").node().getBoundingClientRect(),o=b.r("#mapToolTip");console.log("gm",o,i),o.style("left",n.right-i.left+n.width/4+"px").style("top",n.top-i.top+n.height/2+"px").style("visibility","visible").html(this.singleTTip(t))}catch(s){console.log("error on single mouseover")}}},{key:"handleGlyphMouseOut",value:function(t,e){this.g.select("#glyph"+V.getCountyGeoid(t)).style("r","").style("stroke",""),b.r("#mapToolTip").style("visibility","hidden")}},{key:"handleRightClick",value:function(t){if(b.d.preventDefault(),this.bordersDrawn){this.setState({currentTransform:""})}}},{key:"handleGroupMouseOver",value:function(t,e){var a=this.g.select("#countyGroup"+V.getCountyGroup(t));a.style("stroke-width",7).style("stroke","red").style("z-index",100);try{var r=a.node().getBoundingClientRect(),n=b.r(".map-svg").node().getBoundingClientRect();b.r("#mapToolTip").style("left",r.right-n.left+r.width/4+"px").style("top",r.top-n.top+r.height/2+"px").style("visibility","visible").html(this.groupTTip(t))}catch(i){console.log("error on mouseover")}}},{key:"handleSingleCountyMouseOver",value:function(t,e){var a=this.g.select("#singleCounty"+V.getCountyGeoid(t));a.style("stroke-width",5).style("stroke","red").style("z-index",100);try{var r=a.node().getBoundingClientRect(),n=b.r(".map-svg").node().getBoundingClientRect();b.r("#mapToolTip").style("left",r.right-n.left+r.width/4+"px").style("top",r.top-n.top+r.height/2+"px").style("visibility","visible").html(this.singleTTip(t))}catch(i){console.log("error on single mouseover")}}},{key:"handleGroupMouseOut",value:function(t,e){this.g.select("#countyGroup"+V.getCountyGroup(t)).style("stroke-width","").style("stroke",""),b.r("#mapToolTip").style("visibility","hidden")}},{key:"handleSingleCountyMouseOut",value:function(t,e){var a=V.getCountyGeoid(t);try{this.g.select("#singleCounty"+a).style("stroke-width","").style("stroke","").style("z-index","")}catch(r){b.s(".map-svg").select("#singleCounty"+a).style("stroke-width","").style("stroke","").style("z-index","")}b.r("#mapToolTip").style("visibility","hidden")}},{key:"handleCountyGroupClick",value:function(t){var e=V.getCountyGroup(t);this.props.toggleActiveCountyGroups(e)}},{key:"handleSingleCountyClick",value:function(t){var e=V.getParentCountyGroup(t);this.props.toggleActiveCountyGroups(e)}},{key:"componentDidMount",value:function(){this.create(this._rootNode)}},{key:"shouldDrawBorders",value:function(t){return void 0!==this.props.data&&(!!(!this.bordersDrawn&this.props.data.length>0)||(this.props.aggregateCountys!==t.aggregateCountys||t.data.length!==this.props.data.length))}},{key:"shouldDrawGlyphs",value:function(t){return void 0!==this.props.data&&!w.emptyObject(this.props.data)&&(!(!w.emptyObject(t.data)&&this.props.data.length===t.data.length)||(this.props.mapDate!==t.mapDate||this.props.secondaryVar!==t.secondaryVar||(!this.glyphsDrawn||t.data.length!==this.props.data.length)))}},{key:"componentDidUpdate",value:function(t){console.log("map Update",this.props,t),void 0!==this.props.data&&(this.shouldDrawBorders(t)&&w.wrapError(this.drawBorders.bind(this),"error in Map.drawBorders"),w.wrapError(this.colorBoundaries.bind(this),"error in Map.colorBoundaries"),this.shouldDrawGlyphs(t)&&w.wrapError(this.drawGlyphs.bind(this),"error in Map.drawGlyphs"),this.g.attr("transform",this.state.currentTransform),this.g.selectAll(".glyph").raise())}},{key:"componentWillUnmount",value:function(){this.destroy()}},{key:"_setRef",value:function(t){this._rootNode=t}},{key:"render",value:function(){return n.a.createElement("div",{className:"map-container",ref:this._setRef.bind(this)},n.a.createElement("div",{id:"mapToolTip",className:"toolTip"},"Test"))}}]),a}(n.a.Component);T.defaultProps={spikeWidth:6,backgroundColor:"white",spikeStrokeWidth:1,strokeColor:"black",aggregateCountys:!1,glyphsActive:!0,maxSpikeHeight:30,spikeHeightScaleExp:2};a(191);var A=function(t){Object(h.a)(a,t);var e=Object(d.a)(a);function a(t){var r;return Object(l.a)(this,a),(r=e.call(this,t)).state={primaryTitle:"none",secondaryTitle:"none",tertiaryTitle:"none"},r}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var t=this.refs.rootNode;this.height=t.clientHeight,this.width=t.clientWidth,this.primarySvg=b.r(this.refs.primaryLegend).append("svg").attr("width",this.width).attr("height",this.refs.primaryLegend.clientHeight-this.props.legendTitleSpace),this.secondarySvg=b.r(this.refs.secondaryLegend).append("svg").attr("width",this.width).attr("height",this.refs.secondaryLegend.clientHeight-this.props.legendTitleSpace),this.tertiarySvg=b.r(this.refs.tertiaryLegend).append("svg").attr("width",this.width).attr("height",this.refs.tertiaryLegend.clientHeight-this.props.legendTitleSpace),this.draw()}},{key:"componentDidUpdate",value:function(t){if(!w.emptyObject(this.props.data)&&this.props.colorScale.active){var e=this.props.colorScale,a=t.colorScale;e.stateId!==a.stateId&&this.draw()}}},{key:"draw",value:function(){if(this.props.colorScale.active){var t=this.props.colorScale,e=function(t){t.selectAll("rect").remove(),t.selectAll("text").remove(),t.selectAll("circle").remove()};t.activePrimary?this.drawPrimaryLegend(t):e(this.primarySvg),t.activeSecondary?this.drawSecondaryLegend(t):e(this.secondarySvg),t.activeTertiary?this.drawTertiaryLegend(t):e(this.tertiarySvg);var a=function(t){return"none"===t?"":w.unCamelCase(t)};this.setState({primaryTitle:a(t.primaryVar),secondaryTitle:a(t.secondaryVar),tertiaryTitle:a(t.tertiaryVar)})}}},{key:"drawPrimaryLegend",value:function(t){var e=this.refs.primaryLegend.clientHeight,a=this.primarySvg,r=e;this.getLegend(a,t.primaryScale,t.primaryVar,t.interpolateFill.bind(t),0,r,"primary")}},{key:"drawSecondaryLegend",value:function(t){var e=this.refs.secondaryLegend.clientHeight,a=this.secondarySvg,r=this.reduceTicks(t.secondaryScale.domain()),n=e,i=this.calcDims(r,0,n),o=i.barHeight,s=i.barWidth,u=i.yScale,c=Math.min(o,s)/2;a.selectAll(".legendGlyph").remove();var l=this.props.xMargin/2+c,p=function(t){return u(t)+c};a.selectAll("circle").filter(".legendGlyph").data(r).enter().append("circle").attr("class","legendGlyph").attr("cx",l).attr("cy",p).attr("r",c).attr("fill",function(e){return t.secondaryInterpolator(t.secondaryScale(e))}.bind(t)).attr("stroke","black").attr("stroke-width",1).exit().remove();var h=V.getVarConfig(t.secondaryVar).labelFormatter;a.selectAll(".glyphLegendText").remove(),a.selectAll("text").filter(".glyphLegendText").data(r).enter().append("text").attr("class","glyphLegendText").attr("x",l+c+5).attr("y",(function(t){return p(t)+c/3})).text((function(t){return h(t)})).exit().remove()}},{key:"drawTertiaryLegend",value:function(t){var e,a=this.refs.tertiaryLegend.clientHeight,r=this.tertiarySvg,n=a,i=t.primaryScale.domain(),o=t.interpolateFill(i[i.length-1]),s=this.reduceTicks(t.tertiaryScale.domain()),u=[],c=Object(C.a)(s);try{for(c.s();!(e=c.n()).done;){var l=e.value,p=t.toTexture(l,o);console.log(o,p.url()),r.call(p),u.push(p.url())}}catch(h){c.e(h)}finally{c.f()}this.getLegend(r,t.tertiaryScale,t.tertiaryVar,(function(t,e){return u[e]}),0,n,"tertiaryLegend")}},{key:"reduceTicks",value:function(t){var e=parseInt(t.length/(this.props.nQuantiles-1));if(e>1){var a=[];t.forEach((function(t,r){r%e==0&&a.push(t)}))}return a}},{key:"calcDims",value:function(t,e,a){var r=(a-e)/(t.length+1)-this.props.barSpacing,n=this.width-this.props.xMargin-this.props.textWidth;r=Math.min(r,this.props.maxBarHeight),n=Math.min(n,this.props.maxBarWidth);this.props.barSpacing,t.length;var i=w.arrange(e,a-r,t.length);return{barHeight:r,barWidth:n,yScale:b.p().domain(t).range(i.reverse())}}},{key:"getLegend",value:function(t,e,a,r,n,i,o){var s=this,u=this.reduceTicks(e.domain()),c=this.calcDims(u,n,i),l=c.barHeight,p=c.barWidth,h=c.yScale;t.selectAll("rect").filter("."+o+"Rect").remove(),t.selectAll("rect").filter("."+o+"Rect").data(u).enter().append("rect").attr("class",o+"Rect").attr("x",this.props.xMargin/2).attr("y",(function(t){return h(t)})).attr("width",p).attr("height",l).attr("fill",r).exit().remove(),t.selectAll("text").filter("."+o+"Text").remove();var d=V.getVarConfig(a).labelFormatter;t.selectAll("text").filter("."+o+"Text").data(u).enter().append("text").attr("class",o+"Text").attr("x",this.props.xMargin/2+1.02*p).attr("y",(function(t){return h(t)+l/2+s.props.yMargin/2})).text((function(t){return d(t)})).exit().remove()}},{key:"render",value:function(){return n.a.createElement(y.a,{container:!0,className:"flex-center",ref:"rootNode"},n.a.createElement(y.a,{item:!0,mt:1,xs:12},n.a.createElement("h6",{className:"flex-auto"},this.state.primaryTitle),n.a.createElement("div",{ref:"primaryLegend"})),n.a.createElement(y.a,{item:!0,mt:10,xs:12},n.a.createElement("h6",{className:"flex-auto"},this.state.secondaryTitle),n.a.createElement("div",{ref:"secondaryLegend"})),n.a.createElement(y.a,{item:!0,mt:10,xs:12},n.a.createElement("h6",{className:"flex-auto"},this.state.tertiaryTitle),n.a.createElement("div",{ref:"tertiaryLegend"})))}}]),a}(n.a.Component);A.defaultProps={xMargin:5,yMargin:10,legendMargin:15,nQuantiles:5,barSpacing:.2,textWidth:70,legendTitleSpace:22,maxBarHeight:30,maxBarWidth:40};var O=function(t){Object(h.a)(a,t);var e=Object(d.a)(a);function a(t){var r;return Object(l.a)(this,a),(r=e.call(this,t)).state={spikeColors:a.defaultSpikeConfig},r}return Object(p.a)(a,[{key:"render",value:function(){var t=new D(this.props.data,this.props.mapVar,this.props.secondaryVar,this.props.tertiaryVar,this.props.mapDate);return n.a.createElement("div",{className:"mapContainer"},n.a.createElement(y.a,{container:!0,direction:"row",className:"flex-center"},n.a.createElement(y.a,{item:!0,className:"flex-center",xs:10},n.a.createElement("h2",{className:"flex-center"},w.unCamelCase(this.props.mapVar)),n.a.createElement("div",{className:"mapContainer flex-center"},n.a.createElement(T,{data:this.props.data,mapDate:this.props.mapDate,mapVar:this.props.mapVar,secondaryVar:this.props.secondaryVar,tertiaryVar:this.props.tertiaryVar,colorScale:t,activeCountyGroups:this.props.activeCountyGroups,toggleActiveCountyGroups:this.props.toggleActiveCountyGroups,toggleLoading:this.props.toggleLoading,dataService:this.props.dataService,aggregateCountys:this.props.aggregateCountys,spikeColors:this.state.spikeColors}))),n.a.createElement(y.a,{item:!0,className:"flex-left",xs:2},n.a.createElement(A,{className:"flex-left",colorScale:t,data:this.props.data,mapDate:this.props.mapDate}))))}}]),a}(n.a.Component);O.defaultSpikeConfig={fill:"yellow",stroke:"black",fillOpacity:.9,strokeOpacity:1};var M=function(){function t(e){Object(l.a)(this,t),this.cache={maxCovid:{}},this.preloadCache()}return Object(p.a)(t,[{key:"test",value:function(t){return!0}},{key:"getAvailableDates",value:function(){var t=Object(c.a)(u.a.mark((function t(e){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&void 0!==this.cache.availableDates){t.next=7;break}return(a=["3/1/20","3/11/20","3/21/20","3/31/20","4/10/20","4/20/20","4/30/20","5/10/20","5/20/20","5/30/20","6/19/20","6/29/20","6/9/20","7/19/20","7/9/20"]).sort((function(t,e){return Date.parse(t)-Date.parse(e)})),this.cache.availableDates=a,t.abrupt("return",this.cache.availableDates);case 7:return t.abrupt("return",this.cache.availableDates);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getMapData",value:function(){var t=Object(c.a)(u.a.mark((function t(e){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&void 0!==this.cache.mapData){t.next=11;break}return t.next=3,fetch("county_groups.json");case 3:return a=t.sent,t.next=6,a.json();case 6:return this.cache.mapData=t.sent,console.log(this.cache.mapData),t.abrupt("return",this.cache.mapData);case 11:return t.abrupt("return",this.cache.mapData);case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"preloadCache",value:function(){var t=Object(c.a)(u.a.mark((function t(){var e=this;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.getMapData(!1).then((function(t){e.getAvailableDates(!1)}));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"maxGroupCovid",value:function(t,e){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0===this.cache.availableDates)return 0;if(void 0===this.cache.maxCovid[e]||!a){var r,n=function(t,e,a){return V.groupCovidData(t,e,a)/V.countyGroupPopulation(t)},i=this.cache.availableDates,o=0,s=Object(C.a)(i);try{var u=function(){var a,i=r.value,s=t.map((function(t){return n(t,e,i)})),u=Object(C.a)(s);try{for(u.s();!(a=u.n()).done;)c=a.value,o=c>o?c:o}catch(l){u.e(l)}finally{u.f()}};for(s.s();!(r=s.n()).done;){var c;u()}}catch(l){s.e(l)}finally{s.f()}this.cache.maxCovid[e]=o}return console.log("max",this.cache.maxCovid[e]),this.cache.maxCovid[e]}}]),t}(),E=a(199),j=a(249),I=a(256),P=a(246),L=a(253),N=a(247),B=a(248),F=function(t){Object(h.a)(a,t);var e=Object(d.a)(a);function a(t){var r;return Object(l.a)(this,a),(r=e.call(this,t)).here=0,r}return Object(p.a)(a,[{key:"render",value:function(){var t=this,e=w.validMapVars().map((function(e){return n.a.createElement(I.a,{key:e,value:e,disabled:Boolean(t.props.disabled||e==t.props.mapVar)},w.unCamelCase(e))})),a=w.validMapVars().map((function(e){return n.a.createElement(I.a,{key:e,value:e,disabled:Boolean(t.props.disabled||e===t.props.secondaryVar)},w.unCamelCase(e))})),r=w.validMapVars().map((function(e){return n.a.createElement(I.a,{key:e,value:e,disabled:Boolean(t.props.disabled||e===t.props.tertiaryVar)},w.unCamelCase(e))})),i=S.slice().map((function(e){return n.a.createElement(I.a,{key:e,value:e,disabled:t.props.disabled},w.unCamelCase(e))}));return n.a.createElement("div",{className:"controlPanel"},n.a.createElement(P.a,{color:"default"},n.a.createElement(y.a,{container:!0,spacing:1,justify:"space-around",direction:"row","align-items":"flex-end"},n.a.createElement(y.a,{item:!0},n.a.createElement(N.a,null,n.a.createElement(L.a,{disabled:this.props.disabled,value:this.props.mapVar,renderValue:function(t){return w.unCamelCase(t)},onClick:this.props.handleMapVarChange},e),n.a.createElement(B.a,{id:"mapVarInputLabel"},"Primary Var."))),n.a.createElement(y.a,{item:!0},n.a.createElement(N.a,null,n.a.createElement(L.a,{disabled:this.props.disabled,value:this.props.secondaryVar,renderValue:function(t){return w.unCamelCase(t)},onClick:this.props.handleSecondaryVarChange},a),n.a.createElement(B.a,{id:"mapVarInputLabel"},"Secondary Var."))),n.a.createElement(y.a,{item:!0},n.a.createElement(N.a,null,n.a.createElement(L.a,{disabled:this.props.disabled,value:this.props.tertiaryVar,renderValue:function(t){return w.unCamelCase(t)},onClick:this.props.handleTertiaryVarChange},r),n.a.createElement(B.a,{id:"mapVarInputLabel"},"Tertiary Var."))),n.a.createElement(y.a,{item:!0},n.a.createElement(N.a,null,n.a.createElement(L.a,{disabled:this.props.disabled,value:this.props.aggregationLevel,renderValue:function(t){return w.unCamelCase(t)},onClick:this.props.toggleAggregateCountys},i),n.a.createElement(B.a,{id:"mapVarInputLabel"},"Aggregation Level"))),n.a.createElement(y.a,{item:!0},n.a.createElement(j.a,null,n.a.createElement(E.a,{color:"default",variant:"contained",onClick:this.props.resetActiveCountys},"Reset Selection"),n.a.createElement(E.a,{color:"default",variant:"contained",onClick:this.props.setAllCountiesActive},"Select All"))))))}}]),a}(n.a.Component);(function(t){Object(h.a)(a,t);var e=Object(d.a)(a);function a(t){var r;return Object(l.a)(this,a),(r=e.call(this,t)).state={},r}return Object(p.a)(a,[{key:"create",value:function(t){b.r(t).selectAll("svg").remove(),this.height=t.clientHeight,this.width=t.clientWidth,this.svg=b.r(t).append("svg").attr("class","covidTimeLine").attr("width",this.width).attr("height",this.height),this.g=this.svg.append("g").attr("class","chart"),this.setupData()}},{key:"setupData",value:function(){var t=this;if(void 0!==this.props.data.length&&void 0!==this.props.availableDates.length){var e,a=V.activeGroups(this.props.data,this.props.activeCountyGroups),r=[],n=Object(C.a)(a);try{for(n.s();!(e=n.n()).done;){var i,o=e.value.counties,s=Object(C.a)(o);try{for(s.s();!(i=s.n()).done;){var u=i.value;r.push(u)}}catch(c){s.e(c)}finally{s.f()}}}catch(c){n.e(c)}finally{n.f()}this.data=r,this.accessor=V.getAccessor(this.props.mapVar,this.props.mapDate),this.data.sort((function(e,a){return t.accessor(e)>t.accessor(a)}))}}},{key:"shouldSetupData",value:function(t){if(w.emptyObject(this.props.data))return!1;if(w.emptyObject(t.data))return!0;if(t.data.length!==this.props.data.length)return!0;if(!w.arrayEqual(t.activeCountyGroups,this.props.activeCountyGroups))return!0;for(var e=0,a=["mapVar","mapDate","secondaryVar"];e<a.length;e++){var r=a[e];if(this.props[r]!==t[r])return!0}return!1}},{key:"shouldDraw",value:function(t){return!0}},{key:"getPoints",value:function(){var t=V.getAccessor(this.props.secondaryVar,this.props.mapDate),e=this.data.map(t),a=this.data.map(this.accessor),r=this.data.map(V.getCountyPopulation),n=[];for(var i in e){var o={y:e[i],x:a[i],pop:r[i]};n.push(o)}return n.sort((function(t,e){return t.x-e.x})),n}},{key:"smoothXPoints",value:function(t,e,a,r,n){for(var i=[{x:e,y:r}],o=(a-e)/n,s=e,u=function(){var e=s+o,a=t.filter((function(t){return t.x>s})).filter((function(t){return t.x<=e}));if(a.length>0){var n=Object(x.sum)(a.map((function(t){return t.pop}))),u={x:Object(x.sum)(a.map((function(t){return t.x*t.pop})))/n,y:Object(x.sum)(a.map((function(t){return t.y*t.pop})))/n,pop:n};i.push(u)}else i.push({x:s,y:r,pop:0});s=e};s<a;)u();return i.push({x:a,y:r,pop:0}),i}},{key:"getScaleType",value:function(t){return"voting"===t?b.p():b.q(.5)}},{key:"draw",value:function(){}},{key:"componentDidMount",value:function(){this.create(this._rootNode)}},{key:"componentDidUpdate",value:function(t){}},{key:"componentWillUnmount",value:function(){}},{key:"_setRef",value:function(t){this._rootNode=t}},{key:"render",value:function(){return n.a.createElement("div",{className:"map-container",ref:this._setRef.bind(this)})}}]),a}(n.a.Component)).defaultProps={margin:30,marginTop:5,rectPadding:2,data:{},covidVar:"cases",perCapita:!0};var R=a(250),_=function(t){Object(h.a)(a,t);var e=Object(d.a)(a);function a(t){var r;return Object(l.a)(this,a),(r=e.call(this,t)).dataService=new M,r.dataService.test(),r.state={mapData:{},name:"vizAtHome",mapVar:r.props.defaultMapVar,secondaryVar:r.props.defaultSecondaryVar,tertiaryVar:r.props.defaultTertiaryVar,mapDate:"3/1/20",mapIsLoaded:!1,aggregateCountys:!0,aggregationLevel:"groups",availableDates:["3/1/20","4/30/20","7/9/20"],activeCountyGroups:[]},r}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.dataService.getMapData(!0).then((function(e){t.dataService.getAvailableDates().then((function(a){t.setState({mapData:e,availableDates:a,mapIsLoaded:!0})}))}))}},{key:"validateMapVar",value:function(){var t=w.validMapVars();w.itemInArray(this.state.mapVar,t)||this.setState({mapVar:t[0]})}},{key:"handleMapVarChange",value:function(t){try{var e=t.target.value;void 0!==e&0!==e&&this.setState({mapVar:t.target.value})}catch(a){}}},{key:"toggleActiveCountyGroups",value:function(t){var e=this.state.activeCountyGroups.slice(),a=e.indexOf(t);-1===a?e.push(t):e.splice(a,1),this.setState({activeCountyGroups:e})}},{key:"toggleAggregateCountys",value:function(t){try{var e=t.target.value;if(void 0!==e&0!==e){var a="groups"===e;this.setState({aggregationLevel:e,aggregateCountys:a})}}catch(r){}}},{key:"handleSecondaryVarChange",value:function(t){try{var e=t.target.value;void 0!==e&0!==e&&this.setState({secondaryVar:e})}catch(a){}}},{key:"handleTertiaryVarChange",value:function(t){try{var e=t.target.value;void 0!==e&0!==e&&this.setState({tertiaryVar:e})}catch(a){}}},{key:"resetActiveCountys",value:function(){this.setState({activeCountyGroups:[]})}},{key:"setAllCountiesActive",value:function(){var t=this.state.mapData.map((function(t){return V.getCountyGroup(t)}));this.setState({activeCountyGroups:t})}},{key:"handleSliderChange",value:function(t,e){var a=this;this.dataService.getAvailableDates(!0).then((function(t){var r=t[e];a.setState({mapDate:r})}))}},{key:"getDefaultMapDateIdx",value:function(t){return t.length>0?t.length-1:0}},{key:"toggleLoading",value:function(t){this.setState({mapIsLoaded:t})}},{key:"loadData",value:function(){var t=Object(c.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.props.dataService.getMapData(!0);case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement("div",{className:"component-app"},n.a.createElement(R.a,null),n.a.createElement(y.a,{container:!0,direction:"row",spacing:4},n.a.createElement(y.a,{item:!0,id:"controlPanel",className:"flex-center",xs:12},n.a.createElement(F,{disabled:!this.state.mapIsLoaded,mapVar:this.state.mapVar,secondaryVar:this.state.secondaryVar,tertiaryVar:this.state.tertiaryVar,aggregationLevel:this.state.aggregationLevel,resetActiveCountys:this.resetActiveCountys.bind(this),setAllCountiesActive:this.setAllCountiesActive.bind(this),handleMapVarChange:this.handleMapVarChange.bind(this),toggleAggregateCountys:this.toggleAggregateCountys.bind(this),handleSecondaryVarChange:this.handleSecondaryVarChange.bind(this),handleTertiaryVarChange:this.handleTertiaryVarChange.bind(this)})),n.a.createElement(y.a,{className:"body",id:"mapColumn",container:!0,item:!0,xs:12},n.a.createElement(y.a,{item:!0,id:"mapBox",xs:12},n.a.createElement(O,{dataService:this.dataService,mapIsLoaded:this.state.mapIsLoaded,toggleLoading:this.toggleLoading.bind(this),mapVar:this.state.mapVar,secondaryVar:this.state.secondaryVar,tertiaryVar:this.state.tertiaryVar,aggregateCountys:this.state.aggregateCountys,activeCountyGroups:this.state.activeCountyGroups,toggleActiveCountyGroups:this.toggleActiveCountyGroups.bind(this),mapDate:this.state.mapDate,data:this.state.mapData,availableDates:this.state.availableDates})),n.a.createElement(y.a,{item:!0,m:0,mt:4,id:"dateSliderBox",xs:12},n.a.createElement(m.a,{align:"justify",gutterBottom:!1,variant:"h5"},"Select Date:"),n.a.createElement(v.a,{defaultValue:0,min:0,className:"slider",disabled:!this.state.mapIsLoaded,max:this.state.availableDates.length-1,marks:w.markify(this.state.availableDates,this.state.mapDate),step:null,valueLabelDisplay:"off",onChange:this.handleSliderChange.bind(this)})))),n.a.createElement(g.a,{className:"backdrop",open:!this.state.mapIsLoaded,invisible:this.state.mapIsLoaded},n.a.createElement(f.a,{color:"inherit"})))}}]),a}(n.a.Component);_.defaultProps={defaultMapVar:"none",defaultSecondaryVar:"none",defaultTertiaryVar:"none"};a(195),a(196);o.a.render(n.a.createElement(_,null),document.getElementById("root"))},34:function(t,e,a){}},[[185,1,2]]]);
//# sourceMappingURL=main.85cde6cd.chunk.js.map